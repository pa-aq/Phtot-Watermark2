# 图片水印工具 PRD 文档

## 1. 项目概述

### 1.1 项目名称
图片水印工具（Photo-Watermark2）

### 1.2 项目简介
本项目是一款运行在Windows平台上的桌面应用程序，旨在为用户提供简单高效的图片水印添加功能。用户可以通过本工具批量为图片添加文本水印或图片水印，并可自定义水印的样式、位置、透明度等属性，以保护图片版权或增加品牌标识。

### 1.3 目标用户
- 需要保护图片版权的摄影师、设计师
- 需要为图片添加品牌标识的内容创作者
- 需要批量处理图片的用户

## 2. 功能需求

### 2.1 文件处理

#### 2.1.1 导入图片
- 支持单张图片拖拽或通过文件选择器导入
- 支持批量导入，可一次性选择多张图片或直接导入整个文件夹
- 在界面上显示已导入图片的列表（缩略图和文件名）

#### 2.1.2 支持格式
- 输入格式：JPEG, PNG, BMP, TIFF
- 输出格式：JPEG 或 PNG
- PNG格式必须支持透明通道

#### 2.1.3 导出图片
- 用户可指定输出文件夹，默认禁止导出到原文件夹
- 提供导出文件命名规则选项：
  - 保留原文件名
  - 添加自定义前缀（如 wm_）
  - 添加自定义后缀（如 _watermarked）
- 对于JPEG格式，提供图片质量调节滑块（0-100）
- 导出时允许用户调整图片尺寸（如按宽度、高度或百分比缩放）

### 2.2 水印类型

#### 2.2.1 文本水印
- 内容：用户可自定义输入任意文本
- 字体：可选择系统已安装的字体、字号、粗体、斜体
- 颜色：提供调色板让用户选择字体颜色
- 透明度：可调节文本的透明度（0-100%）
- 样式：可添加阴影或描边效果，以增强在复杂背景下的可读性

#### 2.2.2 图片水印
- 用户可从本地选择一张图片（如Logo）作为水印
- 必须支持带透明通道的PNG图片
- 缩放：可按比例或自由调整图片水印的大小
- 透明度：可调节图片水印的整体透明度（0-100%）

### 2.3 水印布局与样式

#### 2.3.1 实时预览
- 所有对水印的调整都应在主预览窗口中实时显示效果
- 用户可以点击图片列表切换预览不同的图片

#### 2.3.2 位置
- 预设位置：提供九宫格布局（四角、正中心），用户可一键将水印放置在这些位置
- 手动拖拽：用户可以直接在预览图上通过鼠标拖拽水印到任意位置

#### 2.3.3 旋转
- 提供滑块或输入框，允许用户以任意角度旋转水印

### 2.4 配置管理

#### 2.4.1 水印模板
- 用户可以将当前的水印设置保存为一个模板
- 用户可以加载、管理和删除已保存的模板
- 程序启动时可自动加载上一次关闭时的设置或一个默认模板

## 3. 非功能需求

### 3.1 性能需求
- 图片导入和预览响应时间不超过2秒
- 批量处理10张1024x768分辨率图片的时间不超过30秒
- 内存占用不超过500MB

### 3.2 可用性需求
- 界面简洁直观，操作流程清晰
- 提供详细的错误提示和操作指导
- 支持快捷键操作

### 3.3 兼容性需求
- 支持Windows 7及以上版本的操作系统
- 支持各种常见屏幕分辨率

## 4. 用户界面设计

### 4.1 主界面布局
- 左侧：图片列表区域，显示已导入图片的缩略图和文件名
- 中央：图片预览区域，显示当前选中图片的预览效果
- 右侧：水印设置面板，包含水印内容、样式、位置等设置项

### 4.2 功能区域划分
- 顶部菜单栏：文件操作（导入、导出）、编辑、查看、帮助等
- 工具栏：常用操作按钮（添加文本水印、添加图片水印等）
- 状态栏：显示当前状态信息

## 5. 技术实现

### 5.1 技术栈
- 开发语言：Python 3.8+
- GUI框架：PyQt5/PySide6
- 图像处理库：Pillow (PIL)

### 5.2 关键模块
- 文件管理模块：处理图片的导入导出
- 水印处理模块：添加、编辑水印
- 预览模块：实时显示处理效果
- 配置管理模块：保存和加载模板配置

## 6. 项目规划

### 6.1 开发阶段
1. 需求分析与设计（1周）
2. 基础框架搭建（1周）
3. 核心功能实现（2周）
4. 高级功能实现（1周）
5. 测试与优化（1周）

### 6.2 发布计划
- 内部测试版：开发完成后2周内
- 正式版：内部测试通过后1个月内

## 7. 风险评估

### 7.1 潜在风险
- 大文件处理性能问题
- 不同格式图片的兼容性问题
- 水印预览与实际输出效果不一致

### 7.2 应对措施
- 对大文件进行分块处理
- 添加详细的错误处理和日志记录
- 确保预览与输出使用相同的处理逻辑
## 8. 附录

### 8.1 术语表
- 水印：添加在图片上的标识，用于版权保护或品牌宣传
- 透明度：控制水印的不透明程度
- 描边：文本或图形边缘的线条，增强可读性
- 模板：保存的水印配置，可重复使用

### 8.2 参考资料
- PyQt5/PySide6 官方文档
- Pillow (PIL) 官方文档